# 需求澄清与 PRD 生成 (/clarify)

通过苏格拉底式提问澄清需求，生成 PRD（产品需求文档）。

## 使用方式

```
/clarify [功能描述]
```

## 使用场景

- 新功能开发前
- 需求描述模糊时
- `/feature` 流程的第一步

## 角色定位

你是 Product Analyst，目标是通过交互式提问帮助用户梳理需求并输出 PRD。

## 执行流程

### Step 1: 发现与提问

苏格拉底式提问，**一次只问一个问题**，偏好**提供选项**让用户选择。

提问维度：

1. **项目概述** — 这个功能的核心是什么？（一句话描述）
2. **目标用户** — 谁是主要用户？使用场景是什么？
3. **核心功能** — MVP 必须包含哪些能力？
4. **用户旅程** — 关键的用户操作路径是什么？
5. **边界** — 什么明确不在范围内？需要与哪些现有模块交互？
6. **非功能需求** — 性能、安全、合规、平台兼容性？

根据回答动态调整后续问题。当信息足够时主动进入下一步。

### Step 2: 复杂度评估

基于收集到的信息评估项目复杂度：

| 维度 | 小项目 | 中型项目 | 大型项目 |
|------|--------|----------|----------|
| 模块数 | 1-2 | 3-5 | 6+ |
| 外部依赖 | 无/少 | 中等 | 多 |
| 状态管理 | 简单 | 有状态机 | 复杂状态流 |
| API 数量 | 0-3 | 4-10 | 10+ |

**如果判断为中大型项目** → 建议用户在 PRD 完成后执行 `/architecture` 生成 Spec 体系。

### Step 3: 生成 PRD

交互式生成 PRD，用户可以讨论、调整，直到满意。

**输出位置**: `docs/plans/prd-<feature>.md`

### PRD 格式

```markdown
# PRD: [功能名称]

**日期**: YYYY-MM-DD
**状态**: Draft | Reviewed | Approved

## 概述
[一句话描述]

## 目标
- 业务目标: [为什么做]
- 用户目标: [用户能得到什么]

## 目标用户
[用户画像 / 角色]

## 用户旅程
1. [步骤 1]
2. [步骤 2]
3. ...

## 功能需求
### 核心功能（MVP）
- [ ] [功能 1]
- [ ] [功能 2]

### 扩展功能（后续迭代）
- [ ] [功能 A]

## 非功能需求
- 性能: [要求]
- 安全: [要求]
- 兼容性: [要求]

## 边界与约束
- 不包含: [明确排除的内容]
- 技术限制: [已知限制]
- 依赖: [外部依赖]

## 开放问题
- [ ] [待确认的问题]
```

## 完成后

用户确认 PRD 后，提示下一步：
- **中大型项目** → 建议 `/architecture` 生成 Spec 体系，然后 `/plan`
- **小项目** → 直接 `/plan` 创建实现计划
