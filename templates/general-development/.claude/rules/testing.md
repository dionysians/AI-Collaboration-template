# 测试规范

## 硬约束

- **覆盖率** ≥ 80%
- **没有失败的测试，就不写生产代码**（业务逻辑/算法场景）
- 测试失败时修实现，不改测试（除非测试本身有误）

## TDD 适用边界

| 场景 | 测试策略 |
|------|---------|
| 业务逻辑 / 算法 | TDD（强制）— RED-GREEN-REFACTOR |
| Bug 修复 | 先写回归测试证明 bug 存在 |
| UI 组件 | Visual / E2E 测试 |
| 探索代码 | 无测试（/spike 模式） |
| 集成/胶水代码 | Integration 测试为主 |
| 性能敏感 | Benchmark 测试 |

## 测试质量

- 测试独立，无相互依赖
- 一个测试只验证一个行为
- 名字描述行为，不描述实现
- 优先用真实依赖，避免过度 mock
