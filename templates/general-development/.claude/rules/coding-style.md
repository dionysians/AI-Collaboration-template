# 代码风格规范

## 硬约束

- **不可变性** — 创建新对象，禁止直接修改（spread / map / filter）
- **函数体** ≤ 50 行，单一职责
- **文件** 200-400 行典型，≤ 800 行上限，超过必须拆分
- **嵌套** ≤ 4 层，超过则提取函数
- **按功能/领域组织文件**，不按类型（controllers/services/models）

## 错误处理

- 始终处理错误，不吞掉（空 catch）
- 提供有意义的错误信息，不暴露内部细节
- 在系统边界验证外部输入，内部函数信任类型系统

## 禁止

- 无 console.log 遗留
- 无硬编码配置值
- 无未处理的 Promise rejection
